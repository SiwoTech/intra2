<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modificar Orden</title>
    <link rel="stylesheet" href="../css/stylesNew.css">
    <link rel="stylesheet" href="../css/stylesCreateOrder.css">
    <link rel="stylesheet" href="../css/stylesEditOrder.css">
    
    <script src="../js/scriptsEditarOrden.js" defer></script>
    <link rel="shortcut icon" href="../images/favicon.ico?crc=25332213"/>
</head>
<body>
    <header class="finisher-header header" >
        <div class="header_image_container">
        <div class="header__title">
            <img class="svg" id="u123202" src="../images/LogoOrange.png" width="126" height="49" alt="" data-mu-svgfallback="images/pasted%20svg%20330792x129_poster_.png?crc=3851218457">
            
        <div class="header_data_container">
            <div class="user-info">
                <p class="username">Usuario: <span id="user"></span></p>
                <p class="affiliate">Afiliado a: <span id="franq"></span></p>
                <p class="category">Cat: <span id="cat"></span></p>
                <p class="date" id="fecha"></p>
            </div>
        </div>
        </div>
        <img src="../images/baner800.jpg" class="bebeOrange" alt="Logo">
    </div>
</header>

<main>
    <center>
        <div id="franqTitle" class="franqTitle">Modificación de Orden</div>
        
        <!-- Mensaje de error -->
        <div id="error-message" class="error-message" style="display: none;"></div>
        
        <!-- Información de la orden -->
        <div class="order-info-section">
            <h2>Información de la Orden</h2>
            <div class="order-basic-info">
                <span><strong>Orden:</strong> <span id="orderNumber"></span></span>
                <span><strong>Item:</strong> <span id="orderItem"></span></span>
                <span><strong>SubOrden:</strong> <span id="orderSubOrder"></span></span>
                <span><strong>Estado:</strong> <span id="orderStatus"></span></span>
            </div>
        </div>

        <!-- Formulario de edición -->
        <div class="edit-container">
            <!-- Sección 1: Datos del Cliente -->
            <div class="edit-section">
                <h2>Datos del Cliente</h2>
                <div class="form-group-grid">
                    <div class="form-group">
                        <label for="nombre">Nombre:</label>
                        <input type="text" id="nombre" placeholder="Ingrese su nombre completo" required maxlength="50" autocomplete="name">
                    </div>

                    <div class="form-group">
                        <label for="telefono">Teléfono:</label>
                        <input type="tel" id="telefono" placeholder="Ej: +52 123 456 7890" required maxlength="20" autocomplete="tel">
                    </div>

                    <div class="form-group">
                        <label for="correo">Correo (opcional):</label>
                        <input type="email" id="correo" placeholder="ejemplo@correo.com" maxlength="100" autocomplete="email">
                    </div>

                    <div class="form-group">
                        <label for="pais">País:</label>
                        <select id="pais" required>
                            <option value="">Seleccione un país</option>
                            <option value="Mexico">México</option>
                            <option value="USA">Estados Unidos</option>
                            <option value="Canada">Canadá</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="ciudad">Ciudad:</label>
                        <input type="text" id="ciudad" placeholder="Ingrese su ciudad" required maxlength="50" autocomplete="address-level2">
                    </div>

                    <div class="form-group">
                        <label for="direccion">Dirección:</label>
                        <input type="text" id="direccion" placeholder="Calle, número, colonia..." required maxlength="100" autocomplete="street-address">
                    </div>
                </div>
            </div>

            <!-- Sección 2: Servicios -->
            <div class="edit-section">
                <h2>Servicios</h2>
                <div class="services-container">
                        <div class="DetailsContainer">
                            <div class="orderedServicesContainer">
                                <div class="nameContainer">
                                    <h4 class="services-section-title">Servicios</h4>
                                    <ol id="serviceList">
                                        <!-- Lista de servicios seleccionados -->
                                    </ol>
                                </div>
                            </div>
                            <div class="orderedServicesButtons">
                                <button class="btn-restore" onclick="restoreServices()">Restablecer</button>
                                <h2>Total: $<span id="totalPrice">0</span></h2>
                            </div>
                        </div>
                    
                    <div class="services-modification">
                        <h3>Modificar Servicios</h3>
                        <div class="PricesTable popin-shadow">
                            <table class="pricesTable">
                                <thead>
                                    <tr>
                                        <th colspan="4">Tabla de Precios</th>
                                    </tr>
                                </thead>
                                <tbody id="pricesTableBody">
                                    <tr class="classification">
                                        <th>Servicio</th>
                                        <th>Desinfección</th>
                                        <th>Lavado</th>
                                        <th>Editar</th>
                                    </tr>
                                    <!-- Las filas se llenarán dinámicamente con JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <button class="btn-continue" onclick="addService()">Agregar Servicio</button>

                    </div>
                </div>
            </div>

            <!-- Sección 3: Detalles y Fechas -->
            <div class="edit-section">
                <h2>Detalles y Fechas</h2>
                <div class="form-group-grid">
                    <div class="form-group">
                        <label for="fsolicita">Fecha de Solicitud:</label>
                        <input type="date" id="fsolicita" required>
                    </div>

                    <div class="form-group">
                        <label for="fprogram">Fecha Programada:</label>
                        <input type="date" id="fprogram" required>
                    </div>

                    <div class="form-group">
                        <label for="hora">Hora programada:</label>
                        <input type="time" id="hora" required>
                    </div>

                    <div class="form-group">
                        <label for="operador">Operador:</label>
                        <select id="operador" required>
                            <option value="">Seleccione un operador</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label for="comentarios">Comentarios (opcional):</label>
                        <textarea id="comentarios" placeholder="Ingrese sus comentarios" rows="3"></textarea>
                    </div>
                </div>
            </div>

            <!-- Botones de acción -->
            <div class="action-buttons">
                <button type="button" class="btn-cancel" onclick="cancelEdit()">Cancelar</button>
                <button type="button" class="btn-restore" onclick="restoreAllData()">Restablecer Todo</button>
                <button type="button" class="btn-confirm" onclick="submitEditedOrder()">Confirmar Modificaciones</button>
            </div>

            <p class="note">NOTA: Todo trabajo está sujeto a modificación de precio por el operador, en caso de que no se hayan dado las medidas correctas en un inicio.</p>
        </div>
    </center>
</main>

<!-- Modales para servicios -->
<div id="modalOverlay" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h3 id="modalTitle">Agregar Servicio</h3>
        
        <div id="proportionalModal" style="display: none;">
            <div class="form-group">
                <label for="areaSize">Área en m²:</label>
                <input type="number" id="areaSize" min="1" step="0.01" placeholder="Ingrese el área">
            </div>
            <div class="modal-result">
                <strong>Precio calculado: $<span id="calculatedPrice">0</span></strong>
            </div>
        </div>

        <div id="rangeModal" style="display: none;">
            <p>Seleccione el rango de precio:</p>
            <div class="range-options">
                <button class="btn-range" id="minRangeBtn">Mínimo: $<span id="minPrice">0</span></button>
                <button class="btn-range" id="maxRangeBtn">Máximo: $<span id="maxPrice">0</span></button>
            </div>
        </div>

        <div id="customModal" style="display: none;">
            <div class="form-group">
                <label for="customServiceName">Nombre del servicio:</label>
                <input type="text" id="customServiceName" placeholder="Ingrese el nombre del servicio">
            </div>
            <div class="form-group">
                <label for="customServicePrice">Precio:</label>
                <input type="number" id="customServicePrice" min="0" step="0.01" placeholder="0.00">
            </div>
        </div>

        <div id="editPriceModal" style="display: none;">
            <div class="form-group">
                <label for="editServicePrice">Nuevo precio:</label>
                <input type="number" id="editServicePrice" min="0" step="0.01" placeholder="0.00">
            </div>
        </div>

        <div class="modal-buttons">
            <button class="btn-cancel" onclick="closeModal()">Cancelar</button>
            <button class="btn-confirm" id="confirmModalBtn">Confirmar</button>
        </div>
    </div>
</div>

<script src="../js/finisher-header.es5.min.js" type="text/javascript"></script>
<script type="text/javascript">
new FinisherHeader({
  "count": 6,
  "size": {
    "min": 1100,
    "max": 1300,
    "pulse": 0
  },
  "speed": {
    "x": {
      "min": 0.1,
      "max": 1.0
    },
    "y": {
      "min": 0.1,
      "max": 1.0
    }
  },
  "colors": {
    "background": "#fc5f07",
    "particles": [
      "#fc3f04",
      "#fccb37",
      "#fc7536"
    ]
  },
  "blending": "overlay",
  "opacity": {
    "center": 1,
    "edge": 0.1
  },
  "skew": 0,
  "shapes": [
    "c"
  ]
});
</script>
</body>
</html>
